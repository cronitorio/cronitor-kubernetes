apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
  - extra-namespace/cronjob-extra-namespace.yaml
  - main/cronjob.yaml
  - main/cronjob-env-annotation.yaml
  - main/cronjob-env-home.yaml
  - main/cronjob-exclude.yaml
  - main/cronjob-fail.yaml

patches:
  - target:
      kind: CronJob
    patch: |-
      - op: replace
        path: /apiVersion
        value: batch/v1beta1

  - target:
      kind: CronJob
      name: test-cronjob-namespace
    patch: |-
      - op: replace
        path: /metadata/namespace
        value: "${EXTRA_NAMESPACE}"